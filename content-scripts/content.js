var content=function(){"use strict";var B=Object.defineProperty;var K=(T,w,u)=>w in T?B(T,w,{enumerable:!0,configurable:!0,writable:!0,value:u}):T[w]=u;var v=(T,w,u)=>K(T,typeof w!="symbol"?w+"":w,u);var W,V;function T(e){return e}const u=(V=(W=globalThis.browser)==null?void 0:W.runtime)!=null&&V.id?globalThis.browser:globalThis.chrome,q={matches:["<all_urls>"],main(){const e=new WeakSet;let t="",n=!1,s=null;const h=()=>{s&&(clearInterval(s),s=null)};window.addEventListener("beforeunload",h),document.addEventListener("visibilitychange",()=>{document.hidden&&s?(clearInterval(s),s=null):!document.hidden&&!s&&S()});const m=async()=>{if(!n){n=!0;try{const f=document.body.innerText.slice(0,1e4);if(f===t)return;t=f;const c=new Map,d=/[1-9A-HJ-NP-Za-km-z]{32,44}/g,i=[],P=document.createTreeWalker(document.body,NodeFilter.SHOW_TEXT,{acceptNode:r=>{var g;const o=r.parentElement;if(!o||e.has(o)||o.hasAttribute("data-acid-processed")||o.closest("[data-acid-processed]"))return NodeFilter.FILTER_REJECT;const l=(g=r.textContent)==null?void 0:g.trim();return l&&l.length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}});let C;for(;C=P.nextNode();)i.push(C);const a=50;for(let r=0;r<i.length;r+=a){const o=i.slice(r,r+a);for(const l of o){const g=l.textContent;if(g){const L=g.match(d);if(L){const E=l.parentElement;if(E&&!e.has(E)){const _=L.filter(M=>/^[1-9A-HJ-NP-Za-km-z]{32,44}$/.test(M));_.length>0&&(c.has(E)||c.set(E,[]),_.forEach(M=>{c.get(E).includes(M)||c.get(E).push(M)}))}}}}r+a<i.length&&await new Promise(l=>setTimeout(l,0))}if(c.size===0)return;const p=10,k=[],b=Array.from(c.values()).flat(),A=[...new Set(b)];for(let r=0;r<A.length;r+=p)k.push(A.slice(r,r+p));const G=await Promise.allSettled(k.map(r=>fetch(`https://api.dexscreener.com/latest/dex/tokens/${r.join(",")}`,{signal:AbortSignal.timeout(5e3)}))),O=(await Promise.allSettled(G.filter(r=>r.status==="fulfilled").map(r=>r.value.json()))).filter(r=>r.status==="fulfilled").flatMap(r=>r.value.pairs||[]),I={};O.forEach(r=>{I[r.baseToken.address.toLowerCase()]=r});const Y=[];c.forEach((r,o)=>{e.has(o)||o.hasAttribute("data-acid-processed")||o.closest("[data-acid-processed]")||r.forEach(l=>{const g=l.toLowerCase();if(I[g]&&(e.add(o),o.setAttribute("data-acid-processed","true"),o.setAttribute("data-token-address",l),o.setAttribute("data-token-symbol",I[g].baseToken.symbol),Y.push({element:o,address:l,tokenData:I[g]}),o instanceof HTMLElement)){const L=o.innerHTML,E=I[g];if((o.textContent||"").trim()===l){const U=x(E,L,!1);o.innerHTML="",o.appendChild(U),o.style.border="none",o.style.boxShadow="none"}else{const U=x(E,l,!0),Z=new RegExp(l.replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),X=L.replace(Z,U.outerHTML);o.innerHTML=X}}})})}catch(f){console.error("Token processing error:",f)}finally{n=!1}}},x=(f,c,d)=>{var k;const i=document.createElement(d?"span":"div");i.style.display="inline-flex",i.style.alignItems="center",i.style.gap=d?"4px":"6px",i.style.border=d?"1px solid #00ff00":"2px solid #00ff00",i.style.boxShadow=d?"0 0 5px rgba(0, 255, 0, 0.3)":"0 0 10px rgba(0, 255, 0, 0.5)",i.style.padding=d?"2px 4px":"4px 8px",i.style.borderRadius=d?"4px":"6px",i.style.backgroundColor="rgba(0, 255, 0, 0.1)";const P=d?"16px":"20px",C=d?"8px":"10px",a=document.createElement("div");if(a.style.width=P,a.style.height=P,a.style.flexShrink="0",a.style.borderRadius="50%",a.style.overflow="hidden",a.style.backgroundColor="#f0f0f0",a.style.display="flex",a.style.alignItems="center",a.style.justifyContent="center",(k=f.info)!=null&&k.imageUrl){const b=document.createElement("img");b.src=f.info.imageUrl,b.style.width="100%",b.style.height="100%",b.style.objectFit="cover";const A=()=>{a.innerHTML=`<span style="font-size: ${C}; font-weight: bold; color: #666;">${f.baseToken.symbol.charAt(0)}</span>`,b.removeEventListener("error",A)};b.addEventListener("error",A),a.appendChild(b)}else a.innerHTML=`<span style="font-size: ${C}; font-weight: bold; color: #666;">${f.baseToken.symbol.charAt(0)}</span>`;const p=document.createElement("span");return d?(p.textContent=c,p.style.fontFamily="monospace",p.style.fontSize="0.9em"):(p.innerHTML=c,p.style.fontSize="inherit",p.style.color="inherit"),i.appendChild(a),i.appendChild(p),i},S=()=>{s||(s=window.setInterval(m,1e3))};return document.addEventListener("contextmenu",f=>{const c=f.target.closest("[data-token-address]");if(c){const d=c.getAttribute("data-token-address"),i=c.getAttribute("data-token-symbol");u.runtime.sendMessage({to:"background",action:"set-context",token:{address:d,symbol:i}})}else u.runtime.sendMessage({to:"background",action:"clear-context"})}),S(),h}};function N(e,...t){}const j={debug:(...e)=>N(console.debug,...e),log:(...e)=>N(console.log,...e),warn:(...e)=>N(console.warn,...e),error:(...e)=>N(console.error,...e)},R=class R extends Event{constructor(t,n){super(R.EVENT_NAME,{}),this.newUrl=t,this.oldUrl=n}};v(R,"EVENT_NAME",H("wxt:locationchange"));let $=R;function H(e){var t;return`${(t=u==null?void 0:u.runtime)==null?void 0:t.id}:content:${e}`}function D(e){let t,n;return{run(){t==null&&(n=new URL(location.href),t=e.setInterval(()=>{let s=new URL(location.href);s.href!==n.href&&(window.dispatchEvent(new $(s,n)),n=s)},1e3))}}}const y=class y{constructor(t,n){v(this,"isTopFrame",window.self===window.top);v(this,"abortController");v(this,"locationWatcher",D(this));v(this,"receivedMessageIds",new Set);this.contentScriptName=t,this.options=n,this.abortController=new AbortController,this.isTopFrame?(this.listenForNewerScripts({ignoreFirstEvent:!0}),this.stopOldScripts()):this.listenForNewerScripts()}get signal(){return this.abortController.signal}abort(t){return this.abortController.abort(t)}get isInvalid(){return u.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(t){return this.signal.addEventListener("abort",t),()=>this.signal.removeEventListener("abort",t)}block(){return new Promise(()=>{})}setInterval(t,n){const s=setInterval(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearInterval(s)),s}setTimeout(t,n){const s=setTimeout(()=>{this.isValid&&t()},n);return this.onInvalidated(()=>clearTimeout(s)),s}requestAnimationFrame(t){const n=requestAnimationFrame((...s)=>{this.isValid&&t(...s)});return this.onInvalidated(()=>cancelAnimationFrame(n)),n}requestIdleCallback(t,n){const s=requestIdleCallback((...h)=>{this.signal.aborted||t(...h)},n);return this.onInvalidated(()=>cancelIdleCallback(s)),s}addEventListener(t,n,s,h){var m;n==="wxt:locationchange"&&this.isValid&&this.locationWatcher.run(),(m=t.addEventListener)==null||m.call(t,n.startsWith("wxt:")?H(n):n,s,{...h,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),j.debug(`Content script "${this.contentScriptName}" context invalidated`)}stopOldScripts(){window.postMessage({type:y.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName,messageId:Math.random().toString(36).slice(2)},"*")}verifyScriptStartedEvent(t){var m,x,S;const n=((m=t.data)==null?void 0:m.type)===y.SCRIPT_STARTED_MESSAGE_TYPE,s=((x=t.data)==null?void 0:x.contentScriptName)===this.contentScriptName,h=!this.receivedMessageIds.has((S=t.data)==null?void 0:S.messageId);return n&&s&&h}listenForNewerScripts(t){let n=!0;const s=h=>{if(this.verifyScriptStartedEvent(h)){this.receivedMessageIds.add(h.data.messageId);const m=n;if(n=!1,m&&(t!=null&&t.ignoreFirstEvent))return;this.notifyInvalidated()}};addEventListener("message",s),this.onInvalidated(()=>removeEventListener("message",s))}};v(y,"SCRIPT_STARTED_MESSAGE_TYPE",H("wxt:content-script-started"));let z=y;function Q(){}function F(e,...t){}const J={debug:(...e)=>F(console.debug,...e),log:(...e)=>F(console.log,...e),warn:(...e)=>F(console.warn,...e),error:(...e)=>F(console.error,...e)};return(async()=>{try{const{main:e,...t}=q,n=new z("content",t);return await e(n)}catch(e){throw J.error('The content script "content" crashed on startup!',e),e}})()}();
content;
